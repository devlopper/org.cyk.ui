<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:cyk="http://xmlns.jcp.org/jsf/composite/org.cyk.ui.web.primefaces/component">
 
	<h:body>
		<pm:page id="#{pageId==null?'main':pageId}" styleClass="cyk-mobilepage">
			<pm:header styleClass="cyk-mobilepage-header">
				<!-- outcome="pm:#{backPageId}?transition=flip" -->
				<table class="cyk-mobilepage-header-table" cellpadding="0" cellspacing="0"><tr>
					<ui:fragment rendered="#{not empty backPageId}">
					<td class="cyk-mobilepage-header-table-backbuttontd"><p:button styleClass="ui-btn-inline" value="#{uiManager.text('command.back')}" icon="ui-icon-arrow-l" 
						outcome="#{webNavigationManager.mobilePageOutcome(backPageId)}" rendered="#{not empty backPageId}"/></td>
					</ui:fragment>	
					<td class="cyk-mobilepage-header-table-titletd"><h:outputText styleClass="cyk-mobilepage-title" value="#{pageController.contentTitle}" escape="false"/></td>
					<ui:fragment rendered="#{not empty request.remoteUser}">
					<td class="cyk-mobilepage-header-table-menubuttontd"><p:commandButton id="button-menu-main" type="button" value="#{uiManager.text('menu')}" styleClass="ui-btn-inline" icon="ui-icon-arrow-4-diag" 
						rendered="#{not empty request.remoteUser}"/></td>
					</ui:fragment>	
				</tr> </table>				
			</pm:header>
			
			<pm:content styleClass="cyk-mobilepage-content">
				<h:form id="form" enctype="multipart/form-data" >
					<p:outputPanel id="contentPanel">
			 			<p:growl id="formSubmitGrowl" autoUpdate="true" />
						<ui:include src="/org.cyk.ui.web.primefaces/include/menu/menu.xhtml" >
							<ui:param name="model" value="#{pageController.contextualMenuModel}" />
							<ui:param name="menu" value="#{pageController.contextualMenu}" />
						</ui:include>
						<ui:include src="/org.cyk.ui.web.primefaces/include/layout/sounds.xhtml" />
						<ui:insert name="content">
							<h1><h:outputText value="Mobile Page Content under construction" /></h1>
						</ui:insert>
					</p:outputPanel>
				</h:form>
			</pm:content>
			
			<p:overlayPanel for="button-menu-main" at="left" showEffect="overlay">
				<h:form>
					<ui:include src="/org.cyk.ui.web.primefaces/include/menu/menu.xhtml" >
						<ui:param name="model" value="#{pageController.mainMenuModel}" />
						<ui:param name="menu" value="#{pageController.mainMenu}" />
					</ui:include>
				</h:form>		
			</p:overlayPanel>
			
			<pm:footer styleClass="cyk-mobilepage-footer">
				<h:outputText value="#{pageController.footer}" escape="false"/>
			</pm:footer>
		</pm:page> 
	</h:body>
</html>
